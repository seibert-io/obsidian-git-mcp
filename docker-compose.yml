services:
  obsidian-mcp:
    build: .
    ports:
      - "3000:3000"
    environment:
      # Required
      - MCP_API_TOKEN=your-secret-token-here
      - GIT_REPO_URL=https://github.com/user/obsidian-vault.git
      # Required — OAuth 2.1
      - OAUTH_PASSWORD=your-vault-authorization-password
      - JWT_SECRET=your-jwt-secret-minimum-32-characters-long
      - SERVER_URL=https://your-server.example.com
      # Optional — OAuth 2.1
      - ACCESS_TOKEN_EXPIRY_SECONDS=3600
      - REFRESH_TOKEN_EXPIRY_SECONDS=604800
      # Optional — Git
      - GIT_BRANCH=main
      - GIT_SYNC_INTERVAL_SECONDS=300
      - GIT_USER_NAME=Claude MCP
      - GIT_USER_EMAIL=mcp@example.com
      # Optional — Server
      - VAULT_PATH=/vault
      - PORT=3000
      - LOG_LEVEL=info
    # Uncomment the following to mount a local vault instead of using git sync:
    # volumes:
    #   - /path/to/local/vault:/vault
    restart: unless-stopped
